# Мониторинг

<Общее описание вашего мониторинга и дашборда>



## Для мониторинга выбраны метрики нескольких слоев:

### Инфраструткурный слой:
	- http_requests_total, http_request_duration_seconds (базовые метрики от prometheus_fastapi_instrumentator).
		Эти метрики фиксируют общее количество HTTP-запросов и их длительность.
		Они нужны, чтобы видеть загрузку сервиса, наличие пиков и возможные задержки.
		Используется линейный график для анализа тренда по времени, а также гистограмма для распределения времени ответа.
	- app_model_loaded (Gauge).
		Метрика показывает состояние загрузки модели (1 — модель загружена, 0 — модель не загружена).
		Это критично для отслеживания готовности сервиса.
		Используется сингл-стат (Single Stat) панель в Grafana: сразу видно, модель загружена или нет.


### Метрики реального времени:
	- app_predictions_total (Counter).
		Счётчик количества вызовов эндпоинта /predict.
		Позволяет оценивать нагрузку на сервис и реальное использование модели.
		В Grafana используется линейный график — рост счётчика по времени отражает интенсивность запросов.
	- app_prediction_latency_seconds (Histogram).
		Измеряет задержку предсказания в секундах.
		Важно для SLA и понимания производительности.
		Используется гистограмма + линейный график квантилей (p95/p99), чтобы видеть как общую скорость, так и хвостовые задержки.

### Метрики прикладного уровня:
	- app_inference_errors_total (Counter).
		Счётчик ошибок при инференсе (валидация, формирование DataFrame, предсказание).
		Помогает быстро выявлять проблемные этапы.
		В Grafana используется stacked bar chart (столбиковая диаграмма с разбиением по label stage), чтобы было видно, на каком шаге чаще всего возникают ошибки.
	- app_predicted_price (Summary).
		Метрика для распределения предсказанных цен (сумма, среднее, квантили).
		Это прикладной уровень: можно понять диапазон выдаваемых моделью прогнозов.
		В Grafana — boxplot или heatmap (распределение значений) + линейный график средних.

